# âœˆï¸ Ehjezli AI Agent

A high-performance, resilient AI orchestration engine designed for the **Ehjezli Platform**. 
This project leverages **LangGraph** and **Groq** to create a hybrid agent capable of handling complex booking queries with robust memory management and fault tolerance. Now featuring a fully integrated **Telegram Interface**.



[Image of software architecture diagram]


## ğŸš€ Key Features

### ğŸ§  Hybrid Model Intelligence
- **Dynamic Dispatch:** Automatically routes queries between heavy "Reasoning" models (e.g., `llama-3.3-70b`) and fast "Instant" models (`llama-3.1-8b`).
- **Pure AI Logic:** Zero hardcoded strings. Responses, including greetings and error handling, are dynamically generated by the AI based on context.

### ğŸ“± Advanced Telegram Integration (New)
- **Stateful Messaging:** Instead of spamming the chat, the agent sends a single status message (e.g., "Searching...") and **edits** it in real-time as the reasoning process progresses.
- **Heartbeat Mechanism:** A parallel background task keeps the "Typing..." indicator active during long-running tool executions, ensuring excellent UX.
- **Robust Webhook:** Built-in FastAPI route (`/webhook/telegram`) designed to handle high concurrency with background tasks.

### âš¡ Developer Automation (New)
- **One-Click Startup:** Includes `run_auto.py`, a magic script that:
  1. Launches Ngrok in the background.
  2. Fetches the new public URL.
  3. Automatically updates the Telegram Bot Webhook.
  4. Starts the Uvicorn Server.

### ğŸ’¾ Smart Persistent Memory
- **Async Architecture:** Built on `aiosqlite` and `AsyncSqliteSaver` for non-blocking I/O operations.
- **Self-Healing Context:** Automatically detects `Context Overflow` and archives old sessions.
- **WAL Mode Enabled:** Optimized SQLite configuration for high-concurrency writes.

## ğŸ“Š Live Dashboard
Explore the project performance and metrics here:
[**View Ehjezli Dashboard**](https://ehjezli-dash-mkhcwwnt.manus.space/)

## ğŸ› ï¸ Tech Stack

- **Framework:** [FastAPI](https://fastapi.tiangolo.com/) (Async Web Server)
- **Orchestration:** [LangGraph](https://langchain-ai.github.io/langgraph/) (Stateful Agents)
- **LLM Provider:** [Groq API](https://groq.com/) (LPU Inference)
- **Tunneling:** [Ngrok](https://ngrok.com/) (Secure Localhost Tunneling)
- **Database:** SQLite (Async/WAL Mode)
- **Language:** Python 3.10+

## ğŸ“‚ Project Structure

```bash
ehjezli_agent/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ agents/         # Orchestrator & Logic
â”‚   â”œâ”€â”€ api/            # Routes (Telegram Webhook)
â”‚   â”œâ”€â”€ core/           # Config, Registry, Memory Manager
â”‚   â”œâ”€â”€ services/       # Telegram Service & External APIs
â”‚   â”œâ”€â”€ tools/          # Dynamic Tool Factory
â”‚   â””â”€â”€ main.py         # Application Entry Point
â”œâ”€â”€ ehjezli_memory.db   # Persistent Storage
â”œâ”€â”€ run.py         # ğŸš€ Automation Script
â””â”€â”€ requirements.txt